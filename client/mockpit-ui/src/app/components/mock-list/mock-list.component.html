<div class="flex flex-col mt-[5vh] px-[2vw]">
  <div class="sm:-mx-6 lg:-mx-8">
    <div class="inline-block min-w-full py-2 sm:px-3 lg:px-8">
      <div class="m-auto max-w-full lg:max-w-[70vw]">
        <div class="flex items-center space-x-1 md:space-x-4 justify-center my-4">
          <mockpit-search class="grow" *ngIf="dataSource?.data?.length>0"></mockpit-search>
          <div class="space-x-1 md:space-x-4">
            <input type="file" #fileInput class="hidden" (change)="onFileSelected($event)" accept=".json"
              capture="user" />
  
            <button class="h-min" (click)="fileInput.click()">Import</button>
  
  
            <button class="h-min" (click)="onExport()" *ngIf="dataSource?.data?.length>0">Export</button>

          </div>
        </div>
        <div class="mat-elevation-z8" *ngIf="(mocks$ | async); else loading">
          <table mat-table [dataSource]="dataSource" class="text-left text-sm font-light" *ngIf="dataSource.data.length>0">

            <!-- Position Column -->
            <ng-container matColumnDef="name">
              <th mat-header-cell *matHeaderCellDef> </th>
              <td mat-cell *matCellDef="let element" routerLink="/mock/{{element.id}}" class="overflow-hidden cursor-pointer hover:text-blue-800"> 
                <h4 routerLink="/mock/{{element.id}}" class="text-lg my-1 ">{{element.name | truncate }}</h4>
                <p class="text-xs my-1"><span class="font-bold mr-8">{{element.route.method | truncate}}</span><span>
                  {{element.route.path | truncate}}
                </span></p>  
              </td>
            </ng-container>

            <!-- Name Column -->
            <ng-container matColumnDef="description">
              <th mat-header-cell *matHeaderCellDef class="hidden"> Description </th>
              <td mat-cell *matCellDef="let element" class="hidden"> {{element.description}} </td>
            </ng-container>

            <!-- Weight Column -->
            <ng-container matColumnDef="method">
              <th mat-header-cell *matHeaderCellDef class="hidden"> Method </th>
              <td mat-cell *matCellDef="let element" class="hidden"> {{element.route.method}} </td>
            </ng-container>

            <!-- Symbol Column -->
            <ng-container matColumnDef="path">
              <th mat-header-cell *matHeaderCellDef class="hidden"> Path </th>
              <td mat-cell *matCellDef="let element" class="hidden"> {{element.route.path | truncate}} </td>
            </ng-container>

            <!-- Symbol Column -->
            <ng-container matColumnDef="action">
              <th mat-header-cell *matHeaderCellDef></th>
              <td mat-cell *matCellDef="let element">
                <div class="flex">
                  <img class="m-auto w-5 h-5 cursor-pointer hover:bg-slate-300" src="./../../../assets/icons/delete.svg"
                    alt="Delete Icon" (click)="deleteMock(element.id)">
                </div>
              </td>
            </ng-container>

            <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
            <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
          </table>

          <mat-paginator *ngIf="dataSource.data.length>0" (page)="handlePageEvent($event)" [length]="length" [pageSize]="pageSize" [disabled]="disabled"
            [showFirstLastButtons]="showFirstLastButtons" [pageSizeOptions]="showPageSizeOptions ? pageSizeOptions : []"
            [hidePageSize]="hidePageSize" [pageIndex]="pageIndex" showFirstLastButtons
            aria-label="Select page of periodic elements">
          </mat-paginator>
        </div>
        <div *ngIf="(mocks$ | async)?.length == 0" class="w-full h-[70vh] text-center mt-[10vh]">
          <span class="m-auto text-2xl">Create your first mock by clicking <strong class="block">'New
              Mock'</strong></span>
        </div>
        <ng-template #loading>
          <p clas="h-[60vh] w-full leading-[60vh] text-center">Loading...</p>
        </ng-template>
      </div>
    </div>
  </div>
</div>